<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>顧客管理（簡易版）</title>
  <link rel="stylesheet" href="./manage.css" />
</head>
<body>
  <header>
    <h1>顧客管理</h1>
    <div class="tools">
      <input id="q" type="search" placeholder="名前・メール・電話で検索" />
      <select id="sort">
        <option value="lastReservation:desc">最終来店 新→旧</option>
        <option value="lastReservation:asc">最終来店 旧→新</option>
        <option value="totalReservations:desc">来店回数 多→少</option>
        <option value="name:asc">名前 A→Z</option>
      </select>
      <button id="reload">再読込</button>
      <button id="exportCsv">CSV</button>
    </div>
  </header>

  <main>
    <section id="customersSection">
      <table id="customers">
        <thead>
          <tr>
            <th>お名前</th>
            <th>メール</th>
            <th>電話</th>
            <th>最終来店</th>
            <th>回数</th>
            <th>直近メニュー</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="pager"></div>
    </section>

    <section id="drawer" aria-hidden="true">
      <div class="drawer-inner">
        <button class="close" aria-label="閉じる">×</button>
        <h2 id="drawerTitle">来店履歴</h2>
        <table id="history">
          <thead>
            <tr>
              <th>日時</th>
              <th>メニュー</th>
              <th>項目</th>
              <th>ステータス</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="tokenView" style="display:none;">
      <h2>予約リンクからの表示</h2>
      <pre id="tokenResult"></pre>
    </section>
  </main>

  <script src="./manage.js"></script>
</body>
</html>
